<!DOCTYPE html>
<html>
<head>
	<title>Teste API</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
	<h1>Filmes de Star Wars</h1>
	<ul id="movies">
		<li class="template" style="display: none;">
			<span class="title">Filme 1</span>
			-
			Epis√≥dio <span class="episode_id">X</span>
			-
			<span class="release_date">1979-00-00</span>
		</li>
	</ul>

<button id="get_movies" type="button">Pegar Filmes</button>

<script>
(function() {
  var httpRequest;
  document.getElementById("get_movies").addEventListener('click', makeRequest);

  function makeRequest() {

    $.ajax({url: "https://swapi.dev/api/films/", success: function(result){

      console.log(30,result)

      showFilms(result['results']);
    }});
  }

  function showFilms(data){
		// console.log(data);
  	data.forEach(showFilm);
  }

  function showFilm(element, index, array){
  	parent = document.getElementById("movies");
  	newElement = parent.getElementsByClassName("template")[0].cloneNode(true);

  	// console.log(59, element);

  	// console.log(60, newElement.style);

  	newElement.style.display = "block";
  	newElement.getElementsByClassName("title")[0].textContent = element["title"];
  	newElement.getElementsByClassName("episode_id")[0].textContent = element["episode_id"];
  	newElement.getElementsByClassName("release_date")[0].textContent = element["release_date"];

  	parent.appendChild(newElement); 	
  }
})();
</script>

</body>
</html>